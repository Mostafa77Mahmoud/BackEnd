Context for Agent:
- Repo root currently contains: api_server.py, config.py, doc_processing.py, remote_api.py, utils.py plus BACKEND_DOCUMENTATION.md and TECHNICAL_DIAGRAMS.md. Use those two docs as authoritative context.
- Constraints: Keep Flask (do NOT rewrite to FastAPI). Keep using LibreOffice headless for DOCX→PDF. Default jurisdiction = "Egypt". Do NOT add a separate auth-service. Keep structure tidy and clear but not over-engineered. If you think a simpler structure than the one suggested is better, apply it. Any file that is for testing/demo only should start with a comment: `# NOTE: This file is for testing purposes only`.
- Goal: Reorganize the project into a clean, modular layout, add/modify API endpoints, create prompt files under `prompts/`, and update BACKEND_DOCUMENTATION.md and TECHNICAL_DIAGRAMS.md to reflect changes. Leave a small "agent workspace" section in each generated prompt file (a placeholder comment) so you can augment prompts later with repository-specific context.

High-level tasks (do them in this order, create a checkpoint after each major step):
1) Restructure project files into a cleaner package/folder layout (keep it readable, not too fragmented).
2) Add/modify API endpoints as discussed:
   - POST /analyze (accepts file or text, analysis_type ["sharia","legal"], jurisdiction optional default Egypt)
   - GET /analysis/<analysis_id>
   - POST /generate_from_brief
   - POST /generate_modified_contract
   - POST /interact
   - POST /review_modification
   - Admin skeleton for /rules (create/update/delete)
3) Create prompt files under `prompts/`:
   - EXTRACTION_PROMPT.txt
   - SYS_PROMPT_SHARIA_ANALYSIS.txt
   - SYS_PROMPT_LEGAL_ANALYSIS.txt
   - CONTRACT_GENERATION_PROMPT.txt
   - CONTRACT_REGENERATION_PROMPT.txt
   - INTERACTION_PROMPT_SHARIA.txt
   - INTERACTION_PROMPT_LEGAL.txt
   - REVIEW_MODIFICATION_PROMPT_SHARIA.txt
   - REVIEW_MODIFICATION_PROMPT_LEGAL.txt
   - (Optional) EXTRACTION_VALIDATION_PROMPT.txt, RAG_PROMPT_TEMPLATE.txt if useful
   * Each file must start with:
     "AUTO-GENERATED by Agent — leave this line for future reference"
     and an agent context block placeholder.
   * For legal prompts: author them yourself in the same style and schema as the sharia prompts.
4) Update BACKEND_DOCUMENTATION.md and TECHNICAL_DIAGRAMS.md to reflect new structure and endpoints.
   - In BACKEND_DOCUMENTATION.md: document each endpoint with example request/response.
   - In TECHNICAL_DIAGRAMS.md: regenerate architecture diagrams (ASCII or mermaid).
5) Create checkpoint, run smoke tests (curl examples), provide summary of changes.

Deliverables required:
- Cleaned project structure (not too fragmented, intuitive layout).
- Prompts/ directory with all required prompt files.
- Updated endpoints in Flask (api_server.py split into app package if needed).
- Updated BACKEND_DOCUMENTATION.md and TECHNICAL_DIAGRAMS.md.

Operational constraints:
- Use Build Mode. 
- Do not introduce unnecessary complexity (avoid over-splitting into too many files).
- Any testing/demo-only code must start with `# NOTE: This file is for testing purposes only`.
- Create checkpoints at milestones: after restructure, after endpoints, after docs.
- Provide a final short summary (files changed, endpoints added, tests run).

End result:
- A modular but readable Flask project, prompts separated, updated docs, and a checkpoint capturing all changes.
